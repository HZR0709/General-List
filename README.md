# ä»»åŠ¡ç®¡ç†å™¨ (Task Manager)

ä¸€ä¸ªåŸºäºCè¯­è¨€å®ç°çš„è½»é‡çº§ä»»åŠ¡ç®¡ç†ç³»ç»Ÿï¼Œä½¿ç”¨ä¸€ä¸ªé€šç”¨åŒå‘é“¾è¡¨æ•°æ®ç»“æ„å­˜å‚¨å’Œç®¡ç†ä»»åŠ¡ã€‚

## åŠŸèƒ½ç‰¹æ€§

### æ ¸å¿ƒåŠŸèƒ½
- âœ… ä»»åŠ¡å¢åˆ æ”¹æŸ¥ï¼ˆCRUDï¼‰
- âœ… ä»»åŠ¡çŠ¶æ€ç®¡ç†ï¼ˆå¾…å¤„ç†ã€è¿è¡Œä¸­ã€å·²å®Œæˆã€å·²å–æ¶ˆï¼‰
- âœ… æ‰¹é‡æ“ä½œï¼ˆå¯åŠ¨æ‰€æœ‰å¾…å¤„ç†ä»»åŠ¡ï¼‰
- âœ… æŒ‰æ¡ä»¶ç­›é€‰å’Œæ›´æ–°
- âœ… ä»»åŠ¡ä¼˜å…ˆçº§ç®¡ç†

### é«˜çº§ç‰¹æ€§
- ğŸ”’ å†…å­˜å®‰å…¨ï¼šå®Œå…¨æ— å†…å­˜æ³„æ¼
- ğŸš€ ç±»å‹å®‰å…¨ï¼šå¼ºç±»å‹æ£€æŸ¥å’Œæšä¸¾çŠ¶æ€
- ğŸ“Š è¯¦ç»†æ—¥å¿—ï¼šæ ¼å¼åŒ–è¾“å‡ºä»»åŠ¡ä¿¡æ¯
- ğŸ§ª å…¨é¢æµ‹è¯•ï¼šå•å…ƒæµ‹è¯•å’Œé›†æˆæµ‹è¯•
- ğŸ› å†…å­˜è°ƒè¯•ï¼šValgrindæ”¯æŒ

## é¡¹ç›®ç»“æ„

```
.
â”œâ”€â”€ include/                    # å¤´æ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ list.h                 # é“¾è¡¨æ•°æ®ç»“æ„
â”‚   â”œâ”€â”€ task.h                 # ä»»åŠ¡ç±»å‹å®šä¹‰
â”‚   â””â”€â”€ task_manager.h         # ä»»åŠ¡ç®¡ç†å™¨æ¥å£
â”œâ”€â”€ src/                       # æºæ–‡ä»¶ç›®å½•
â”‚   â”œâ”€â”€ list.c                 # é“¾è¡¨å®ç°
â”‚   â”œâ”€â”€ task.c                 # ä»»åŠ¡æ“ä½œå‡½æ•°
â”‚   â””â”€â”€ task_manager.c         # ä»»åŠ¡ç®¡ç†å™¨å®ç°
â”œâ”€â”€ test/                      # æµ‹è¯•ç›®å½•
â”‚   â”œâ”€â”€ test_list.c            # é“¾è¡¨å•å…ƒæµ‹è¯•
â”‚   â””â”€â”€ test_task_mgr.c        # ä»»åŠ¡ç®¡ç†å™¨é›†æˆæµ‹è¯•
â”œâ”€â”€ main.c                     # ä¸»ç¨‹åºç¤ºä¾‹
â”œâ”€â”€ Makefile                   # æ„å»ºé…ç½®
â””â”€â”€ README.md                  # é¡¹ç›®è¯´æ˜
```

## å¿«é€Ÿå¼€å§‹

### ç¯å¢ƒè¦æ±‚
- GCCç¼–è¯‘å™¨
- Linux/macOSç¯å¢ƒ
- Makeæ„å»ºå·¥å…·
- Valgrindï¼ˆå¯é€‰ï¼Œç”¨äºå†…å­˜æ£€æŸ¥ï¼‰

### ç¼–è¯‘é¡¹ç›®

```bash
# ç¼–è¯‘ä¸»ç¨‹åº
make

# ç¼–è¯‘æ‰€æœ‰æµ‹è¯•
make test

# ç¼–è¯‘å¹¶è¿è¡Œä¸»ç¨‹åº
make && ./task_manager
```

### è¿è¡Œæµ‹è¯•

```bash
# è¿è¡Œé“¾è¡¨æµ‹è¯•
make test-list && ./test_list

# è¿è¡Œä»»åŠ¡ç®¡ç†å™¨æµ‹è¯•
make test-task-mgr && ./test_task_mgr

# è¿è¡Œæ‰€æœ‰æµ‹è¯•
make test
./test_list
./test_task_mgr
```

## APIä½¿ç”¨ç¤ºä¾‹

### åŸºç¡€ä½¿ç”¨

```c
#include "task_manager.h"

int main() {
    // åˆ›å»ºä»»åŠ¡ç®¡ç†å™¨
    TaskManager* mgr = task_manager_create();
    
    // æ·»åŠ ä»»åŠ¡
    task_manager_add(mgr, "ç¼–å†™æ–‡æ¡£", 3);
    task_manager_add(mgr, "ä¿®å¤bug", 1);
    task_manager_add(mgr, "ä»£ç å®¡æŸ¥", 2);
    
    // å¯åŠ¨æ‰€æœ‰å¾…å¤„ç†ä»»åŠ¡
    task_manager_start_all_pending(mgr);
    
    // æ›´æ–°ä»»åŠ¡çŠ¶æ€
    task_manager_set_status(mgr, 0, TASK_DONE);
    
    // åˆ é™¤ä»»åŠ¡
    task_manager_remove(mgr, 1);
    
    // æ‰“å°æ‰€æœ‰ä»»åŠ¡
    task_manager_print(mgr);
    
    // æ¸…ç†èµ„æº
    task_manager_destroy(mgr);
    
    return 0;
}
```

### é«˜çº§åŠŸèƒ½

```c
// æ¡ä»¶æ›´æ–°ç¤ºä¾‹
// å°†æ‰€æœ‰ä¼˜å…ˆçº§å¤§äº5çš„ä»»åŠ¡çŠ¶æ€æ›´æ–°
update_if(mgr->tasks, task_priority_gt_5, &new_status, task_update_status);

// æ ¹æ®IDæŸ¥æ‰¾å’Œæ›´æ–°
TaskStatus status = TASK_CANCELED;
update_by_value(mgr->tasks, &task_id, &status, task_update_status);
```

## å†…å­˜ç®¡ç†

é¡¹ç›®åŒ…å«å®Œæ•´çš„å†…å­˜æ£€æŸ¥æ”¯æŒï¼š

```bash
# æ£€æŸ¥ä¸»ç¨‹åºå†…å­˜æ³„æ¼
make memcheck

# æ£€æŸ¥é“¾è¡¨æµ‹è¯•å†…å­˜
make test-list-memcheck

# æ£€æŸ¥ä»»åŠ¡ç®¡ç†å™¨æµ‹è¯•å†…å­˜
make test-task-mgr-memcheck

# å¿«é€Ÿå†…å­˜æ£€æŸ¥
make quick-check
```

## æ„å»ºé€‰é¡¹

```bash
# è°ƒè¯•ç‰ˆæœ¬ï¼ˆå¸¦DEBUGç¬¦å·ï¼‰
make debug

# å‘å¸ƒç‰ˆæœ¬ï¼ˆä¼˜åŒ–ï¼‰
make release

# æ¸…ç†æ„å»ºæ–‡ä»¶
make clean

# é‡æ–°æ„å»º
make rebuild
```

## æ•°æ®ç»“æ„è¯´æ˜

### Taskç»“æ„ä½“
```c
typedef struct {
    int         id;           // å”¯ä¸€ä»»åŠ¡IDï¼ˆè‡ªåŠ¨ç”Ÿæˆï¼‰
    char        name[64];     // ä»»åŠ¡åç§°ï¼ˆæœ€å¤§63å­—ç¬¦ï¼‰
    int         priority;     // ä¼˜å…ˆçº§ï¼ˆæ•°å€¼è¶Šå°ä¼˜å…ˆçº§è¶Šé«˜ï¼‰
    TaskStatus status;        // ä»»åŠ¡çŠ¶æ€ï¼ˆæšä¸¾ï¼‰
    time_t      created_at;   // åˆ›å»ºæ—¶é—´æˆ³
} Task;
```

### ä»»åŠ¡çŠ¶æ€æšä¸¾
```c
typedef enum {
    TASK_PENDING,    // å¾…å¤„ç†
    TASK_RUNNING,    // è¿è¡Œä¸­
    TASK_DONE,       // å·²å®Œæˆ
    TASK_CANCELED    // å·²å–æ¶ˆ
} TaskStatus;
```

## è®¾è®¡æ¨¡å¼

### å›è°ƒå‡½æ•°æ¨¡å¼
é¡¹ç›®ä½¿ç”¨å›è°ƒå‡½æ•°å®ç°æ•°æ®æ“ä½œçš„è§£è€¦ï¼š
- `task_cmp`ï¼šæ¯”è¾ƒä¸¤ä¸ªä»»åŠ¡
- `task_free`ï¼šé‡Šæ”¾ä»»åŠ¡å†…å­˜
- `task_update_status`ï¼šæ›´æ–°ä»»åŠ¡çŠ¶æ€
- æ¡ä»¶åˆ¤æ–­å‡½æ•°ï¼š`task_is_pending`ã€`task_is_running`ç­‰

### ç®¡ç†å™¨æ¨¡å¼
`TaskManager`ä½œä¸ºé—¨é¢ï¼ˆFacadeï¼‰æä¾›ç»Ÿä¸€çš„æ¥å£ï¼Œå°è£…åº•å±‚é“¾è¡¨æ“ä½œã€‚

## æµ‹è¯•è¦†ç›–ç‡

æµ‹è¯•å¥—ä»¶è¦†ç›–ä»¥ä¸‹åŠŸèƒ½ï¼š
1. âœ… é“¾è¡¨åŸºæœ¬æ“ä½œï¼ˆæ’å…¥ã€åˆ é™¤ã€éå†ï¼‰
2. âœ… ä»»åŠ¡ç®¡ç†å™¨ç”Ÿå‘½å‘¨æœŸ
3. âœ… ä»»åŠ¡çŠ¶æ€è½¬æ¢
4. âœ… è¾¹ç•Œæ¡ä»¶å¤„ç†
5. âœ… å†…å­˜ç®¡ç†æ­£ç¡®æ€§

## æ€§èƒ½ç‰¹ç‚¹

- **æ—¶é—´å¤æ‚åº¦**ï¼š
  - æ’å…¥ï¼šO(1)ï¼ˆå°¾éƒ¨æ’å…¥ï¼‰
  - åˆ é™¤ï¼šO(n)ï¼ˆéœ€è¦éå†æŸ¥æ‰¾ï¼‰
  - æŸ¥æ‰¾ï¼šO(n)
  - æ›´æ–°ï¼šO(n)

- **ç©ºé—´å¤æ‚åº¦**ï¼š
  - æ¯ä¸ªä»»åŠ¡ï¼š~80å­—èŠ‚
  - é“¾è¡¨èŠ‚ç‚¹å¼€é”€ï¼š~16å­—èŠ‚ï¼ˆå–å†³äºç³»ç»Ÿï¼‰

## è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨MITè®¸å¯è¯ã€‚è¯¦æƒ…è§LICENSEæ–‡ä»¶ã€‚

## è´¡çŒ®æŒ‡å—

1. Forkæœ¬ä»“åº“
2. åˆ›å»ºç‰¹æ€§åˆ†æ”¯ (`git checkout -b feature/AmazingFeature`)
3. æäº¤æ›´æ”¹ (`git commit -m 'Add some AmazingFeature'`)
4. æ¨é€åˆ°åˆ†æ”¯ (`git push origin feature/AmazingFeature`)
5. å¼€å¯Pull Request

## æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

1. **ç¼–è¯‘é”™è¯¯ï¼šæ‰¾ä¸åˆ°å¤´æ–‡ä»¶**
   ```bash
   # ç¡®ä¿includeç›®å½•å­˜åœ¨
   mkdir -p include
   ```

2. **å†…å­˜æ³„æ¼æ£€æµ‹å¤±è´¥**
   ```bash
   # å®‰è£…valgrind
   sudo apt-get install valgrind  # Ubuntu/Debian
   brew install valgrind          # macOS
   ```

3. **æµ‹è¯•å¤±è´¥**
   ```bash
   # æ¸…ç†åé‡æ–°æ„å»º
   make clean
   make test
   ```

### è°ƒè¯•æç¤º

```bash
# ä½¿ç”¨GDBè°ƒè¯•
gdb ./task_manager

# ç”Ÿæˆæ ¸å¿ƒè½¬å‚¨ï¼ˆå¦‚æœ‰å´©æºƒï¼‰
ulimit -c unlimited
./task_manager
gdb ./task_manager core
```

## æœªæ¥æ‰©å±•

è®¡åˆ’ä¸­çš„åŠŸèƒ½ï¼š
- [ ] ä»»åŠ¡æŒä¹…åŒ–ï¼ˆæ–‡ä»¶/æ•°æ®åº“ï¼‰
- [ ] ä»»åŠ¡ä¾èµ–å…³ç³»
- [ ] ä»»åŠ¡è°ƒåº¦å™¨
- [ ] å¤šçº¿ç¨‹æ”¯æŒ
- [ ] ç½‘ç»œæ¥å£
- [ ] GUIç•Œé¢

## è”ç³»æ–¹å¼

å¦‚æœ‰é—®é¢˜æˆ–å»ºè®®ï¼Œè¯·é€šè¿‡ä»¥ä¸‹æ–¹å¼è”ç³»ï¼š
- æäº¤GitHub Issue
- å‘é€é‚®ä»¶è‡³é¡¹ç›®ç»´æŠ¤è€…

---

**æ³¨æ„**ï¼šæœ¬é¡¹ç›®ä¸»è¦ç”¨äºæ•™å­¦å’Œæ¼”ç¤ºç›®çš„ï¼Œå±•ç¤ºäº†Cè¯­è¨€ä¸­æ•°æ®ç»“æ„ã€å†…å­˜ç®¡ç†å’Œè½¯ä»¶å·¥ç¨‹çš„æœ€ä½³å®è·µã€‚